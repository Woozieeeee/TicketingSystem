{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\n\ninterface NavbarProps {\n  user: {\n    username: string;\n    role: string;\n    dept: string;\n  } | null;\n}\n\nexport default function Navbar({ user }: NavbarProps) {\n  const router = useRouter();\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    router.push(\"/login\");\n  };\n\n  return (\n    <nav\n      className=\"z-999 text-white shadow-md border-b border-gray-200 px-6 py-4 flex justify-between items-center relative\"\n      style={{ backgroundColor: \"#15803d\" }}\n    >\n      {/* Logo / Title */}\n      <div className=\"flex text-white items-center\">\n        <h1\n          className=\"text-xl font-bold tracking-tight cursor-pointer\"\n          onClick={() => router.push(\"/dashboard\")}\n        >\n          Ticketing System\n        </h1>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYe,SAAS,OAAO,EAAE,IAAI,EAAe;IAClD,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;QAAU;kBAGpC,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,OAAO,IAAI,CAAC;0BAC5B;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/app/tickets/create/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Navbar from \"../../../components/Navbar\";\nimport Swal from \"sweetalert2\";\n\nexport default function CreateTicketPage() {\n  const router = useRouter();\n  const [mounted, setMounted] = useState(false);\n  const [user, setUser] = useState<any>(null);\n  const [step, setStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const departmentCategories = {\n    IT: [\"Network\", \"Hardware\", \"Software\", \"Account Reset\"],\n    GASO: [\"Cleaning\", \"Electrical\", \"Plumbing\", \"Carpentry\"],\n    Nursing: [\"Patient Care\", \"Medication\", \"Equipment\", \"Facility\"],\n    General: [\"Concern\", \"Message\", \"Question\", \"Other\"],\n  };\n\n  const [formData, setFormData] = useState({\n    category: \"\",\n    title: \"\",\n    description: \"\",\n    priority: \"High\",\n  });\n\n  // Pag-load ng page, set muna natin 'yung mga kailangan\n  useEffect(() => {\n    setMounted(true);\n    // Check natin 'yung user info para malaman kung anong department siya\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const parsedUser = JSON.parse(storedUser);\n      setUser(parsedUser);\n      // Auto-select natin 'yung category base sa department niya\n      const defaultCat =\n        departmentCategories[\n          parsedUser.dept as keyof typeof departmentCategories\n        ]?.[0] || \"Other\";\n      setFormData((prev) => ({ ...prev, category: defaultCat }));\n    } else {\n      // Pag walang user, balik muna natin sa login page\n      router.push(\"/login\");\n    }\n  }, [router]);\n\n  if (!mounted || !user) return <div className=\"min-h-screen bg-gray-50\" />;\n\n  // Dito natin mina-manage 'yung bawat input na binabago ni user\n  const handleChange = (\n    e: React.ChangeEvent<\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n    >,\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  // Dito na natin isesend 'yung ticket sa database\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n    try {\n      const res = await fetch(\"http://localhost:3001/api/tickets\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          status: \"Pending\",\n          createdBy: user.username,\n          dept: user.dept,\n          date: new Date().toISOString(),\n        }),\n      });\n      if (res.ok) {\n        await Swal.fire({\n          icon: \"success\",\n          title: \"Success!\",\n          text: \"Ticket created successfully!\",\n          timer: 2000,\n          showConfirmButton: false,\n        });\n        router.push(\"/tickets\"); // Tapos na! Balik na tayo sa listahan ng tickets\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Failed\",\n          text: \"Failed to create ticket\",\n        });\n        setIsSubmitting(false);\n      }\n    } catch (error) {\n      console.error(error);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: \"Something went wrong while creating the ticket\",\n      });\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans\">\n      <Navbar user={user} />\n\n      <main className=\"max-w-3xl mx-auto py-12 px-4 \">\n        {/* Progress Indicator */}\n        <div className=\"mb-8 flex items-center justify-center space-x-4 \">\n          <div\n            className={`h-2 w-24 rounded-full ${step >= 1 ? \"bg-green-600\" : \"bg-gray-200\"}`}\n          />\n          <div\n            className={`h-2 w-24 rounded-full ${step >= 2 ? \"bg-green-600\" : \"bg-gray-200\"}`}\n          />\n        </div>\n\n        <div className=\"bg-white shadow-2xl rounded-2xl overflow-hidden border border-gray-100\">\n          {/* Header */}\n          <div className=\"bg-green-600 px-8 py-6\">\n            <h1 className=\"text-2xl font-extrabold text-white tracking-tight\">\n              {step === 1 ? \"New Support Request\" : \"Confirm Your Details\"}\n            </h1>\n            <p className=\"text-blue-100 text-sm mt-1\">Step {step} of 2</p>\n          </div>\n\n          <div className=\"p-8\">\n            {step === 1 ? (\n              <form\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  setStep(2);\n                }}\n                className=\"space-y-10\"\n              >\n                {/* Category Selection - Dropdown */}\n                <section>\n                  <label className=\"text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4 block\">\n                    1. Select Category\n                  </label>\n                  <div className=\"relative\">\n                    <select\n                      name=\"category\"\n                      value={formData.category}\n                      onChange={handleChange}\n                      className=\"w-full rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all p-4 outline-none border appearance-none cursor-pointer\"\n                    >\n                      {(\n                        departmentCategories[\n                          user.dept as keyof typeof departmentCategories\n                        ] || departmentCategories.General\n                      ).map((cat) => (\n                        <option key={cat} value={cat}>\n                          {cat}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </section>\n\n                {/* Subject & Description */}\n                <section className=\"space-y-5\">\n                  <label className=\"text-sm font-semibold text-gray-900 uppercase tracking-wider block border-b pb-2\">\n                    2. Ticket Information\n                  </label>\n\n                  <div>\n                    <label\n                      htmlFor=\"title\"\n                      className=\"block text-xs font-bold text-gray-500 mb-1 ml-1\"\n                    >\n                      SUBJECT TITLE\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"title\"\n                      id=\"title\"\n                      required\n                      value={formData.title}\n                      onChange={handleChange}\n                      className=\"w-full rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all p-4 outline-none border\"\n                      placeholder=\"Enter a brief summary...\"\n                    />\n                  </div>\n\n                  <div>\n                    <label\n                      htmlFor=\"description\"\n                      className=\"block text-xs font-bold text-gray-500 mb-1 ml-1\"\n                    >\n                      DETAILED DESCRIPTION\n                    </label>\n                    <textarea\n                      name=\"description\"\n                      id=\"description\"\n                      rows={4}\n                      required\n                      value={formData.description}\n                      onChange={handleChange}\n                      className=\"w-full rounded-xl border-solid border-gray-200 bg-gray-50 focus:bg-white focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all p-4 \"\n                      placeholder=\"Explain the issue in detail...\"\n                    />\n                  </div>\n                  <div\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"flex-end\",\n                      width: \"100%\",\n                      gap: \"1rem\",\n                    }}\n                  >\n                    <button\n                      type=\"button\"\n                      onClick={() => router.back()}\n                      style={{ width: \"auto\" }}\n                      className=\"!w-fit min-w-[120px] px-8 py-3 border border-gray-300 rounded-xl font-bold text-gray-600 hover:bg-gray-50 transition \"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={isSubmitting}\n                      style={{ width: \"auto\" }}\n                      className=\"!w-fit min-w-[140px] px-8 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg disabled:opacity-50\"\n                    >\n                      {isSubmitting ? \"Saving...\" : \"Create Ticket\"}\n                    </button>\n                  </div>\n                </section>\n              </form>\n            ) : (\n              /* Review Section - Enhanced Spacing */\n              <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                <div className=\"bg-blue-50 border-l-4 border-blue-500 p-5 rounded-r-xl\">\n                  <p className=\"text-sm font-semibold text-blue-800 flex items-center\">\n                    Reviewing {user.dept} Request\n                  </p>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  {/* Subject - Takes up 2 columns on medium screens */}\n                  <div className=\"md:col-span-2 bg-gray-50 p-6 rounded-2xl border border-gray-100\">\n                    <h3 className=\"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2\">\n                      Subject\n                    </h3>\n                    <p className=\"text-xl font-extrabold text-gray-900 leading-tight\">\n                      {formData.title}\n                    </p>\n                  </div>\n\n                  {/* Status - Takes up 1 column and centers the content */}\n                  <div className=\"bg-gray-50 p-6 rounded-2xl border border-gray-100 flex flex-col items-center justify-center\">\n                    <h3 className=\"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2\">\n                      Initial Status\n                    </h3>\n                    <span className=\"px-4 py-2 rounded-full text-xs font-black uppercase bg-yellow-500 text-white\">\n                      Pending\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-2xl border-2 border-dashed border-gray-200 p-8\">\n                  <div className=\"flex justify-between items-center mb-4 border-b pb-4 border-gray-50\">\n                    <span className=\"text-xs font-bold text-gray-400 uppercase\">\n                      Description Details\n                    </span>\n                    <span className=\"text-xs font-bold text-blue-600 bg-blue-50 px-3 py-1 rounded-md\">\n                      Category: {formData.category}\n                    </span>\n                  </div>\n                  <p className=\"text-gray-700 leading-loose text-lg whitespace-pre-wrap\">\n                    {formData.description || \"No details provided.\"}\n                  </p>\n                </div>\n\n                <div className=\"flex items-center justify-between pt-8 border-t border-gray-100\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setStep(1)}\n                    className=\"text-gray-400 hover:text-gray-900 font-bold text-sm flex items-center gap-2 transition\"\n                    disabled={isSubmitting}\n                  >\n                    ‚Üê Back to Edit\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    onClick={handleSubmit}\n                    disabled={isSubmitting}\n                    className={`px-12 py-4 rounded-xl text-white font-bold transition-all shadow-xl active:scale-95 ${\n                      isSubmitting\n                        ? \"bg-gray-400 cursor-not-allowed\"\n                        : \"bg-green-600 hover:bg-green-700\"\n                    }`}\n                  >\n                    {isSubmitting ? \"Submitting...\" : \"Confirm & Send Ticket\"}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}