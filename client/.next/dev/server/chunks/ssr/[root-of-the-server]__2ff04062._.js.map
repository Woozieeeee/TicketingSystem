{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/app/register/page.tsx"],"sourcesContent":["\"use client\"; // This directive tells Next.js that this component runs on the browser (client-side), allowing us to use hooks like useState.\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\"; // Hook to programmatically navigate between pages (e.g., redirect after success).\nimport Link from \"next/link\"; // Next.js optimized Link component for client-side navigation without page reload.\nimport Navbar from \".././components/Navbar\";\n\nexport default function Register() {\n  // State to hold the form input values.\n  const [form, setForm] = useState({\n    username: \"\",\n    password: \"\",\n    department: \"\",\n  });\n\n  // State to track if the form is currently being submitted (to disable the button).\n  const [submitting, setSubmitting] = useState(false);\n\n  // Initialize the router for navigation.\n  const router = useRouter();\n\n  // Handler for form submission.\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault(); // Prevent the default HTML form submission behavior (which would reload the page).\n    setSubmitting(true); // Disable the button to prevent multiple clicks.\n\n    try {\n      // Send a POST request to the backend API.\n      // Note: We point to port 3001 where the Express server is running.\n      const res = await fetch(\"http://localhost:3001/api/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form), // Convert the JavaScript object to a JSON string.\n      });\n\n      // Check if the response status is not OK (e.g., 400 or 500 error).\n      if (!res.ok) {\n        // Try to parse the error message from the response.\n        const data = await res\n          .json()\n          .catch(() => ({ message: res.statusText }));\n        alert(`Registration failed: ${data.message || res.statusText}`);\n        return;\n      }\n\n      // If successful, parse the response data.\n      const data = await res.json();\n      alert(`Registered as ${data.role}!`);\n\n      // Redirect the user to the login page.\n      router.push(\"/login\");\n    } catch (error) {\n      // Handle network errors (e.g., backend is down).\n      console.error(\"Registration error:\", error);\n      alert(\"Failed to connect to server\");\n    } finally {\n      // Always re-enable the button, whether the request succeeded or failed.\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <>\n      <Navbar user={null} />\n      <div\n        style={{\n          padding: \"20px\",\n          maxWidth: \"400px\",\n          margin: \"40px auto\",\n          border: \"1px solid #ccc\",\n          borderRadius: \"8px\",\n        }}\n      >\n        <h1 style={{ textAlign: \"center\" }}>Register</h1>\n        <form onSubmit={handleRegister}>\n          {/* Username Input */}\n          <div style={{ marginBottom: \"10px\" }}>\n            <label\n              htmlFor=\"username\"\n              style={{ display: \"block\", marginBottom: \"5px\" }}\n            >\n              Username\n            </label>\n            <input\n              id=\"username\"\n              value={form.username}\n              // Update the specific field in the state object while keeping others intact using spread syntax (...form).\n              onChange={(e) => setForm({ ...form, username: e.target.value })}\n              style={{\n                width: \"100%\",\n                padding: \"8px\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n              }}\n              required\n            />\n          </div>\n\n          {/* Password Input */}\n          <div style={{ marginBottom: \"10px\" }}>\n            <label\n              htmlFor=\"password\"\n              style={{ display: \"block\", marginBottom: \"5px\" }}\n            >\n              Password\n            </label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={form.password}\n              onChange={(e) => setForm({ ...form, password: e.target.value })}\n              style={{\n                width: \"100%\",\n                padding: \"8px\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n              }}\n              required\n            />\n          </div>\n\n          {/* Department Input */}\n          <div style={{ marginBottom: \"10px\" }}>\n            <label\n              htmlFor=\"department\"\n              style={{ display: \"block\", marginBottom: \"5px\" }}\n            >\n              Department\n            </label>\n            <input\n              id=\"department\"\n              value={form.department}\n              onChange={(e) => setForm({ ...form, department: e.target.value })}\n              placeholder=\"e.g. IT\"\n              style={{\n                width: \"100%\",\n                padding: \"8px\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n              }}\n              required\n            />\n          </div>\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={submitting}\n            style={{\n              padding: \"10px 20px\",\n              width: \"100%\",\n              border: \"1px solid black\",\n              borderRadius: \"4px\",\n              cursor: \"pointer\",\n              marginTop: \"10px\",\n            }}\n          >\n            {submitting ? \"Registering...\" : \"Register\"}\n          </button>\n\n          {/* Navigation Link to Login Page */}\n          <Link\n            href=\"/login\"\n            style={{\n              display: \"block\",\n              marginTop: \"10px\",\n              textAlign: \"center\",\n              textDecoration: \"none\",\n              color: \"#0070f3\",\n              border: \"1px solid #0070f3\",\n              padding: \"8px\",\n              borderRadius: \"4px\",\n            }}\n          >\n            Already have an account? Login here\n          </Link>\n        </form>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}