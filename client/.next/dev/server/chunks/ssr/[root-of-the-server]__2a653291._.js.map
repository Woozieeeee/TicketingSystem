{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\n\ninterface NavbarProps {\n  user: {\n    username: string;\n    role: string;\n    dept: string;\n  } | null;\n}\n\nexport default function Navbar({ user }: NavbarProps) {\n  const router = useRouter();\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    router.push(\"/login\");\n  };\n\n  return (\n    <nav\n      className=\"z-999 text-white shadow-md border-b border-gray-200 px-6 py-4 flex justify-between items-center relative\"\n      style={{ backgroundColor: \"#15803d\" }}\n    >\n      {/* Logo / Title */}\n      <div className=\"flex text-white items-center\">\n        <h1\n          className=\"text-xl font-bold tracking-tight cursor-pointer\"\n          onClick={() => router.push(\"/dashboard\")}\n        >\n          Ticketing System\n        </h1>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYe,SAAS,OAAO,EAAE,IAAI,EAAe;IAClD,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;QAAU;kBAGpC,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,OAAO,IAAI,CAAC;0BAC5B;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/components/sidebar.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { text } from \"stream/consumers\";\r\n\r\nexport default function Sidebar({ user }: { user: any }) {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  // The missing Logout Logic\r\n  const handleLogout = async () => {\r\n    try {\r\n      // 1. If you use an API route for logout:\r\n      // await fetch('/api/auth/logout', { method: 'POST' });\r\n\r\n      // 2. Clear local storage/session (if applicable)\r\n      localStorage.removeItem(\"user_token\");\r\n\r\n      // 3. Redirect to login page\r\n      router.push(\"/login\");\r\n      router.refresh(); // Clears any cached server data\r\n    } catch (error) {\r\n      console.error(\"Logout failed:\", error);\r\n    }\r\n  };\r\n\r\n  const getButtonStyle = (path: string) => ({\r\n    width: \"100%\",\r\n    textAlign: \"left\" as const,\r\n    padding: \"14px 20px\",\r\n    border: \"none\",\r\n    backgroundColor: pathname === path ? \"#e2e60aff\" : \"transparent\",\r\n    color: pathname === path ? \"#2563eb\" : \"#4b5563\",\r\n    fontWeight: \"bold\" as const,\r\n    cursor: \"pointer\",\r\n    transition: \"all 0.2s\",\r\n    marginBottom: \"8px\",\r\n  });\r\n\r\n  return (\r\n    <aside\r\n      style={{\r\n        width: \"260px\",\r\n        backgroundColor: \"#16a34a\",\r\n        borderRight: \"1px solid #e5e7eb\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        position: \"fixed\",\r\n        height: \"calc(100vh - 60px)\", // Subtract navbar height\r\n        left: 0,\r\n        top: \"60px\", // Push it down past the navbar\r\n        zIndex: \"10 !important\",\r\n      }}\r\n    >\r\n      <div style={{ padding: \"32px 24px\", borderBottom: \"1px solid #f3f4f6\" }}>\r\n        <h2\r\n          style={{ fontSize: \"1.3rem\", fontWeight: \"900\", color: \"#dadadaff\" }}\r\n        >\r\n          {user?.dept}\r\n          <span style={{ color: \"#ffffff\" }}> User View</span>\r\n        </h2>\r\n      </div>\r\n\r\n      <nav style={{ flex: 1 }}>\r\n        <button\r\n          onClick={() => router.push(\"/dashboard\")}\r\n          style={{ ...getButtonStyle(\"/dashboard\"), color: \"#ffffff\" }}\r\n        >\r\n          Dashboard\r\n        </button>\r\n        <button\r\n          onClick={() => router.push(\"/tickets\")}\r\n          style={{ ...getButtonStyle(\"/tickets\"), color: \"#ffffff\" }}\r\n        >\r\n          Tickets\r\n        </button>\r\n      </nav>\r\n\r\n      <div\r\n        style={{\r\n          padding: \"20px\",\r\n          borderTop: \"1px solid #f3f4f6\",\r\n          backgroundColor: \"#16a34a\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"12px\",\r\n            marginBottom: \"16px\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"45px\",\r\n              height: \"45px\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: \"#ffffff\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              fontSize: \"1.2rem\",\r\n              fontWeight: \"bold\",\r\n              color: \"#16a34a\",\r\n              border: \"2px solid #ffffff\",\r\n              overflow: \"hidden\", // Ensures image stays circular\r\n              flexShrink: 0,\r\n            }}\r\n          >\r\n            {/* User Text Info */}\r\n            <div style={{ overflow: \"hidden\" }}>\r\n              <p\r\n                style={{\r\n                  fontSize: \"0.9rem\",\r\n                  fontWeight: \"bold\",\r\n                  color: \"#ffffff\", // Changed to white for better contrast on green\r\n                  textTransform: \"capitalize\",\r\n                  whiteSpace: \"nowrap\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                }}\r\n              >\r\n                {user?.username || \"Guest\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div style={{ paddingLeft: \"8px\" }}>\r\n            {/* Username */}\r\n            <p\r\n              style={{\r\n                fontSize: \"0.9rem\",\r\n                fontWeight: \"bold\",\r\n                color: \"#ffffff\", // Changed to white for better contrast on green\r\n                textTransform: \"capitalize\",\r\n                marginBottom: \"2px\", // Small margin to keep them close\r\n              }}\r\n            >\r\n              {user?.username}\r\n            </p>\r\n\r\n            {/* Role */}\r\n            <p\r\n              style={{\r\n                fontSize: \"0.75rem\", // Made slightly smaller for better hierarchy\r\n                fontWeight: \"500\", // Less bold than the name\r\n                color: \"rgba(255,255,255,0.8)\", // Faded white look\r\n                textTransform: \"capitalize\",\r\n                marginBottom: \"8px\", // Keep the 8px here to push the logout button down\r\n              }}\r\n            >\r\n              {user?.role}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={handleLogout}\r\n          style={{\r\n            width: \"100%\",\r\n            padding: \"12px\",\r\n            backgroundColor: \"#e21212ff\",\r\n            color: \"#ffffff\",\r\n            borderRadius: \"4px\",\r\n            fontWeight: \"900\",\r\n            fontSize: \"0.8rem\",\r\n            border: \"solid 2px #500101ff\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          LOGOUT\r\n        </button>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/app/tickets/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"../../components/Navbar\";\nimport { createPortal } from \"react-dom\";\nimport { useRouter } from \"next/navigation\";\nimport Swal from \"sweetalert2\";\nimport { getRelativeTime } from \"../../lib/utils\";\nimport Sidebar from \"../../components/sidebar\";\n\ninterface Ticket {\n  globalId: string | number;\n  id: number;\n  title: string;\n  description: string;\n  category?: string;\n  status: string;\n  createdBy: string;\n  dept: string;\n  date: string;\n  userMarkedDone?: boolean;\n  headMarkedDone?: boolean;\n  lastUpdated?: string;\n}\n\nexport default function TicketsPage() {\n  const router = useRouter();\n  const [user, setUser] = useState<any>(null);\n  const [tickets, setTickets] = useState<Ticket[]>([]);\n  const [selectedTicket, setSelectedTicket] = useState<Ticket | null>(null);\n  const [activeTab, setActiveTab] = useState(\"All\");\n  const [mounted, setMounted] = useState(false);\n  const [categoryFilter, setCategoryFilter] = useState(\"All\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [sortConfig, setSortConfig] = useState<{\n    key: keyof Ticket;\n    direction: \"asc\" | \"desc\";\n  } | null>({ key: \"id\", direction: \"asc\" });\n\n  useEffect(() => {\n    setMounted(true);\n    const storedUser = localStorage.getItem(\"user\");\n    if (storedUser) {\n      const parsedUser = JSON.parse(storedUser);\n      setUser(parsedUser);\n      fetchTickets(parsedUser);\n    } else {\n      router.push(\"/login\");\n    }\n  }, [router]);\n\n  // Lock scrolling when modal is open\n  useEffect(() => {\n    if (selectedTicket) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"unset\";\n    }\n  }, [selectedTicket]);\n\n  const fetchTickets = async (currentUser: any) => {\n    setIsLoading(true);\n    try {\n      const res = await fetch(\"http://localhost:3001/api/tickets/\");\n      if (res.ok) {\n        const serverTickets = await res.json();\n        const localData = localStorage.getItem(\"myTickets\");\n\n        if (localData) {\n          const localTickets = JSON.parse(localData);\n          const merged = serverTickets.map((sTicket: Ticket) => {\n            const localMatch = localTickets.find(\n              (l: Ticket) => l.globalId === sTicket.globalId,\n            );\n            return localMatch ? { ...sTicket, ...localMatch } : sTicket;\n          });\n          setTickets(merged);\n        } else {\n          setTickets(serverTickets);\n        }\n      }\n    } catch (error) {\n      console.error(\"Error fetching tickets:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!mounted || isLoading || !user) {\n    return (\n      <div className=\"h-screen flex items-center justify-center\">\n        Loading...\n      </div>\n    );\n  }\n\n  const handleStatusChange = (globalId: string | number, newStatus: string) => {\n    const updatedTickets = tickets.map((ticket) => {\n      if (ticket.globalId === globalId) {\n        const isHead = user?.role === \"Head\";\n        const isUser = user?.role === \"User\";\n\n        if (newStatus === \"In Progress\") {\n          return {\n            ...ticket,\n            status: \"In Progress\",\n            lastUpdated: new Date().toISOString(),\n          };\n        }\n\n        const updatedTicket = {\n          ...ticket,\n          headMarkedDone: isHead ? true : ticket.headMarkedDone || false,\n          userMarkedDone: isUser ? true : ticket.userMarkedDone || false,\n          lastUpdated: new Date().toISOString(),\n        };\n\n        if (updatedTicket.headMarkedDone && updatedTicket.userMarkedDone) {\n          updatedTicket.status = \"Resolved\";\n        }\n        return updatedTicket;\n      }\n      return ticket;\n    });\n\n    setTickets(updatedTickets);\n    localStorage.setItem(\"myTickets\", JSON.stringify(updatedTickets));\n\n    Swal.fire({\n      toast: true,\n      position: \"top-end\",\n      icon: \"success\",\n      title: \"Status Updated\",\n      showConfirmButton: false,\n      timer: 1500,\n    });\n  };\n\n  const handleSort = (key: keyof Ticket) => {\n    let direction: \"asc\" | \"desc\" = \"asc\";\n    if (sortConfig?.key === key && sortConfig.direction === \"asc\") {\n      direction = \"desc\";\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const filteredByRole = tickets.filter((ticket) => {\n    if (!user) return false;\n    if (user.role === \"Head\") return ticket.dept === user.dept;\n    return ticket.createdBy === user.username;\n  });\n\n  const filteredTickets = filteredByRole.filter((ticket) => {\n    const statusMatch = activeTab === \"All\" || ticket.status === activeTab;\n    const categoryMatch =\n      categoryFilter === \"All\" || ticket.category === categoryFilter;\n    return statusMatch && categoryMatch;\n  });\n\n  const sortedTickets = [...filteredTickets].sort((a, b) => {\n    if (!sortConfig) return 0;\n    const { key, direction } = sortConfig;\n    const valA = a[key as keyof Ticket] ?? \"\";\n    const valB = b[key as keyof Ticket] ?? \"\";\n    if (valA < valB) return direction === \"asc\" ? -1 : 1;\n    if (valA > valB) return direction === \"asc\" ? 1 : -1;\n    return 0;\n  });\n\n  if (!user || isLoading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-gray-50 text-gray-500\">\n        Loading Tickets...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 relative\">\n      <Navbar user={user} />\n      <Sidebar user={user} />\n\n      <main\n        style={{\n          flex: 1,\n          marginLeft: \"260px\", // Matches the width of the sidebar\n          backgroundColor: \"#f8fafc\",\n          padding: \"40px\",\n        }}\n      >\n        <div className=\"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200\">\n          <div className=\"p-8\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                Ticket Management\n              </h2>\n              {user.role !== \"Head\" && (\n                <button\n                  onClick={() => router.push(\"/tickets/create\")}\n                  className=\"bg-green-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-green-700 transition shadow-md flex items-center gap-2\"\n                >\n                  <span className=\"text-lg\">+</span> Create New Ticket\n                </button>\n              )}\n            </div>\n\n            {/* TAB NAVIGATION */}\n            <div className=\"flex gap-8 border-b border-gray-100 mb-6\">\n              {[\"All\", \"Pending\", \"In Progress\", \"Resolved\"].map((tab) => (\n                <button\n                  key={tab}\n                  onClick={() => setActiveTab(tab)}\n                  className={`pb-4 text-sm font-medium transition-all relative flex items-center gap-2 ${\n                    activeTab === tab\n                      ? \"text-blue-600\"\n                      : \"text-gray-400 hover:text-gray-600\"\n                  }`}\n                >\n                  {tab}\n                  <span\n                    className={`text-[10px] px-2 py-0.5 rounded-full ${activeTab === tab ? \"bg-blue-100 text-blue-600\" : \"bg-gray-100 text-gray-500\"}`}\n                  >\n                    {tab === \"All\"\n                      ? filteredByRole.length\n                      : filteredByRole.filter((t) => t.status === tab).length}\n                  </span>\n                  {activeTab === tab && (\n                    <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 rounded-full\" />\n                  )}\n                </button>\n              ))}\n            </div>\n\n            {/* TABLE */}\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    {[\n                      { label: \"ID\", key: \"id\" },\n                      { label: \"Category\", key: \"category\" },\n                      { label: \"Title\", key: \"title\" },\n                      { label: \"Status\", key: \"status\" },\n                      { label: \"Date\", key: \"date\" },\n                    ].map((header) => (\n                      <th\n                        key={header.key}\n                        onClick={() => handleSort(header.key as keyof Ticket)}\n                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          {header.label}{\" \"}\n                          {sortConfig?.key === header.key &&\n                            (sortConfig.direction === \"asc\" ? \"ðŸ”¼\" : \"ðŸ”½\")}\n                        </div>\n                      </th>\n                    ))}\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {sortedTickets.map((ticket) => (\n                    <tr\n                      key={ticket.globalId}\n                      className=\"hover:bg-gray-50/50 transition\"\n                    >\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\n                        #{ticket.id}\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-500\">\n                        {ticket.category || \"General\"}\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\n                        {ticket.title}\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span\n                          className={`px-3 py-1 text-xs font-bold rounded-full ${\n                            ticket.status === \"Pending\"\n                              ? \"bg-yellow-100 text-yellow-800\"\n                              : ticket.status === \"In Progress\"\n                                ? \"bg-blue-100 text-blue-800\"\n                                : \"bg-green-100 text-green-800\"\n                          }`}\n                        >\n                          {ticket.status}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-500\">\n                        {new Date(ticket.date).toLocaleDateString()} at{\" \"}\n                        {new Date(ticket.date).toLocaleTimeString([], {\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                        })}\n                      </td>\n                      <td className=\"px-6 py-4 text-sm font-medium whitespace-nowrap\">\n                        <div className=\"relative z-20 flex items-center gap-3 min-w-[100px]\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation(); // Prevents row click events\n                              setSelectedTicket(ticket);\n                            }}\n                            className=\"px-2 py-1 bg-green-600 text-white border border-green-700 hover:bg-green-700 rounded-lg shadow-sm transition-all active:scale-95 group\"\n                            title=\"View Details\"\n                          >\n                            <svg\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              strokeWidth={2}\n                              stroke=\"currentColor\"\n                              className=\"w-5 h-5\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                d=\"M2.036 12.322a1.012 1.012 0 010-.644C3.412 8.086 7.21 5 12 5c4.79 0 8.588 3.086 9.964 6.678.331.646.331 1.356 0 2.002C20.588 15.914 16.79 19 12 19c-4.79 0-8.588-3.086-9.964-6.678z\"\n                              />\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                              />\n                            </svg>\n                          </button>\n\n                          {user?.role !== \"Head\" &&\n                            ticket.status?.toLowerCase() === \"pending\" &&\n                            String(ticket.createdBy).toLowerCase().trim() ===\n                              String(user?.username).toLowerCase().trim() && (\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  router.push(\n                                    `/tickets/edit?id=${ticket.globalId}`,\n                                  );\n                                }}\n                                className=\"px-2 py-1 bg-green-600 text-white border border-green-700 hover:bg-green-700 rounded-lg shadow-sm transition-all active:scale-95 group\"\n                                title=\"Edit Ticket\"\n                              >\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  strokeWidth={2}\n                                  stroke=\"currentColor\"\n                                  className=\"w-5 h-5\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n                                  />\n                                </svg>\n                              </button>\n                            )}\n\n                          {/* If user is Head, show the Accept/Action button next to the eye */}\n                          {user.role === \"Head\" &&\n                            ticket.status === \"Pending\" && (\n                              <button\n                                onClick={() =>\n                                  handleStatusChange(\n                                    ticket.globalId,\n                                    \"In Progress\",\n                                  )\n                                }\n                                className=\"text-xs font-bold text-green-600 hover:text-green-700 underline underline-offset-4\"\n                              >\n                                Accept\n                              </button>\n                            )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {mounted &&\n        selectedTicket &&\n        createPortal(\n          <div\n            className=\"fixed inset-0 flex items-center justify-center p-4 z-[999999]\"\n            style={{\n              position: \"fixed\",\n              top: 0,\n              left: 0,\n              width: \"100vw\", // Force full width for the dim effect\n              height: \"100vh\", // Force full height\n              backgroundColor: \"rgba(0, 0, 0, 0.4)\", // This creates the DIM effect\n              backdropFilter: \"blur(0.5px)\", // This creates the BLUR effect\n            }}\n          >\n            {/* THE ACTUAL MODAL BOX */}\n            <div\n              className=\"relative bg-white rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col\"\n              style={{\n                width: \"500px\", // Strict width for the card only\n                maxHeight: \"90vh\", // Prevents it from being taller than the screen\n                zIndex: 10000,\n              }}\n            >\n              {/* Header */}\n              <div className=\"px-6 py-5 flex justify-between items-center border-b border-gray-100\">\n                <h3 className=\"text-xl font-black text-slate-900\">\n                  Ticket Details\n                </h3>\n                <button\n                  onClick={() => setSelectedTicket(null)}\n                  className=\"text-gray-400 hover:text-gray-600 text-3xl leading-none transition-colors\"\n                >\n                  &times;\n                </button>\n              </div>\n\n              {/* Body */}\n              <div className=\"p-8 space-y-6 overflow-y-auto\">\n                <div className=\"text-center\">\n                  <label className=\"text-[10px] uppercase font-black text-blue-600 tracking-widest block mb-2\">\n                    Title\n                  </label>\n                  <div className=\"p-3 bg-slate-50 rounded-xl border border-slate-100 font-bold text-slate-800\">\n                    {selectedTicket.title}\n                  </div>\n                </div>\n\n                <div className=\"text-center\">\n                  <label className=\"text-[10px] uppercase font-black text-slate-400 tracking-widest block mb-2\">\n                    Description\n                  </label>\n                  <div\n                    className=\"p-4 bg-slate-50 rounded-xl border border-dashed border-slate-200 text-sm text-slate-600 italic leading-relaxed\"\n                    style={{\n                      wordBreak: \"break-all\", // Forces the \"asdddd...\" to wrap\n                      whiteSpace: \"pre-wrap\", // Preserves line breaks\n                      width: \"100%\", // Keeps it inside the 500px card\n                      maxHeight: \"40vh\",\n                      overflowY: \"auto\",\n                      display: \"block\", // Ensures it behaves as a container\n                    }}\n                  >\n                    \"{selectedTicket.description || \"No description provided.\"}\"\n                  </div>\n                </div>\n              </div>\n\n              {/* Footer */}\n              <div className=\"px-8 pb-8\">\n                <button\n                  onClick={() => setSelectedTicket(null)}\n                  className=\"w-full py-4 mb-6 bg-blue-600 text-white font-black text-sm rounded-2xl hover:bg-blue-700 shadow-xl shadow-blue-100 transition-all active:scale-95\"\n                >\n                  Close Details\n                </button>\n              </div>\n            </div>\n          </div>,\n          document.body,\n        )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}