{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Joseph/Documents/trae_projects/TicketingSystem/client/src/app/login/page.tsx"],"sourcesContent":["\"use client\"; // Marks this as a Client Component to allow interactivity (hooks, event handlers).\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport Navbar from \"@/components/Navbar\";\n\nexport default function Login() {\n  // State for form data and loading status.\n  const [form, setForm] = useState({ username: \"\", password: \"\" });\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault(); // Stop page reload.\n    setLoading(true); // Start loading state.\n\n    try {\n      // POST request to backend login endpoint.\n      const res = await fetch(\"http://localhost:3001/api/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form),\n      });\n\n      if (res.ok) {\n        // If login is valid, get the user data (including role/department).\n        const user = await res.json();\n\n        // Store user data in localStorage.\n        // This is a simple way to persist the session so the Dashboard knows who is logged in.\n        // In a real production app, you would use secure cookies or HTTP-only tokens.\n        localStorage.setItem(\"user\", JSON.stringify(user));\n\n        // Redirect to the Dashboard.\n        router.push(\"/dashboard\");\n      } else {\n        // Handle invalid credentials (401 error).\n        const data = await res.json().catch(() => ({}));\n        alert(data.message || \"Invalid credentials\");\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert(\"Failed to connect to server\");\n    } finally {\n      setLoading(false); // Stop loading state.\n    }\n  };\n\n  return (\n    <>\n      <Navbar user={null} />\n      <div\n        style={{\n          padding: \"20px\",\n          maxWidth: \"400px\",\n          margin: \"40px auto\",\n          border: \"1px solid #ccc\",\n          borderRadius: \"8px\",\n        }}\n      >\n        <h1 style={{ textAlign: \"center\" }}>Login</h1>\n        <form onSubmit={handleLogin}>\n          {/* Username Field */}\n          <div style={{ marginBottom: \"10px\" }}>\n            <label\n              htmlFor=\"username\"\n              style={{ display: \"block\", marginBottom: \"5px\" }}\n            >\n              Username\n            </label>\n            <input\n              id=\"username\"\n              value={form.username}\n              onChange={(e) => setForm({ ...form, username: e.target.value })}\n              style={{\n                width: \"100%\",\n                padding: \"8px\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n              }}\n              required\n            />\n          </div>\n\n          {/* Password Field */}\n          <div style={{ marginBottom: \"10px\" }}>\n            <label\n              htmlFor=\"password\"\n              style={{ display: \"block\", marginBottom: \"5px\" }}\n            >\n              Password\n            </label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              value={form.password}\n              onChange={(e) => setForm({ ...form, password: e.target.value })}\n              style={{\n                width: \"100%\",\n                padding: \"8px\",\n                border: \"1px solid #ccc\",\n                borderRadius: \"4px\",\n              }}\n              required\n            />\n          </div>\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={loading}\n            style={{\n              padding: \"10px 20px\",\n              width: \"100%\",\n              border: \"1px solid black\",\n              borderRadius: \"4px\",\n              cursor: \"pointer\",\n              marginTop: \"10px\",\n            }}\n          >\n            {loading ? \"Logging in...\" : \"Login\"}\n          </button>\n\n          {/* Link to Registration */}\n          <Link\n            href=\"/register\"\n            style={{\n              display: \"block\",\n              marginTop: \"10px\",\n              textAlign: \"center\",\n              textDecoration: \"none\",\n              color: \"#0070f3\",\n              border: \"1px solid #0070f3\",\n              padding: \"8px\",\n              borderRadius: \"4px\",\n            }}\n          >\n            Create a new account\n          </Link>\n        </form>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}